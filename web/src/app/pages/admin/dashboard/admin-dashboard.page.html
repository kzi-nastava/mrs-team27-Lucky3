<div class="min-h-screen bg-black text-white p-4 lg:p-6">
  <div class="max-w-6xl mx-auto space-y-6">
    
    <!-- Header Card -->
    <div class="bg-[#1C1C1E] p-6 rounded-xl border border-gray-800">
      <div class="flex flex-col md:flex-row items-start md:items-center justify-between gap-4">
        <div>
          <h1 class="text-3xl font-bold mb-2">Welcome back, {{ name }}!</h1>
        </div>
      </div>
    </div>

    <!-- admin-dashboard.page.html -->
  <div class="min-h-screen bg-gray-950 text-gray-100 p-6">
    <div class="max-w-7xl mx-auto">
      <div class="flex items-start justify-between gap-4 mb-6">
        <div>
          <h1 class="text-3xl font-bold">Admin Dashboard</h1>
          <p class="text-gray-400 mt-1">Driver request changes</p>
        </div>

        <button
          (click)="loadRequests()"
          class="px-4 py-2 rounded-xl bg-gray-800 hover:bg-gray-700 border border-gray-700 transition text-sm"
        >
          Refresh
        </button>
      </div>

      <div *ngIf="errorMessage" class="mb-4 rounded-xl border border-red-500/30 bg-red-500/10 px-4 py-3 text-red-200">
        {{ errorMessage }}
      </div>

      <div  *ngIf="isLoading" class="rounded-xl border border-gray-800 bg-gray-900/40 p-6">
        <div class="animate-pulse space-y-3">
          <div class="h-4 w-1/3 bg-gray-800 rounded"></div>
          <div class="h-4 w-2/3 bg-gray-800 rounded"></div>
          <div class="h-4 w-1/2 bg-gray-800 rounded"></div>
        </div>
      </div>

      <div *ngIf="!isLoading" class="rounded-2xl border border-gray-800 bg-gray-900/40 overflow-hidden">
        <div class="px-5 py-4 border-b border-gray-800 flex items-center justify-between">
          <div class="text-sm text-gray-300">
            Pending requests: <span class="font-semibold text-white">{{ requests.length }}</span>
          </div>
        </div>

        <div class="overflow-x-auto">
          <table class="min-w-[1400px] w-full text-sm">
            <thead class="bg-gray-900">
              <tr class="text-gray-300">
                <th class="text-left px-4 py-3 border-b border-gray-800">Actions</th>
                <th class="text-left px-4 py-3 border-b border-gray-800">New name</th>
                <th class="text-left px-4 py-3 border-b border-gray-800">New surname</th>
                <th class="text-left px-4 py-3 border-b border-gray-800">New email</th>
                <th class="text-left px-4 py-3 border-b border-gray-800">New phone</th>
                <th class="text-left px-4 py-3 border-b border-gray-800">New address</th>
                <th class="text-left px-4 py-3 border-b border-gray-800">New image</th>
                <th class="text-left px-4 py-3 border-b border-gray-800">Baby transport</th>
                <th class="text-left px-4 py-3 border-b border-gray-800">Pet transport</th>
                <th class="text-left px-4 py-3 border-b border-gray-800">Vehicle type</th>
                <th class="text-left px-4 py-3 border-b border-gray-800">Passenger seats</th>
                <th class="text-left px-4 py-3 border-b border-gray-800">License number</th>
                <th class="text-left px-4 py-3 border-b border-gray-800">Model</th>
              </tr>
            </thead>

            <tbody>
              <tr *ngIf="requests.length === 0">
                <td colspan="13" class="px-4 py-10 text-center text-gray-400">
                  No pending driver change requests.
                </td>
              </tr>

              <tr *ngFor="let r of requests" class="border-b border-gray-800 hover:bg-gray-900/60 transition">
                <!-- Actions -->
                <td class="px-4 py-3 align-top">
                  <div class="flex gap-2">
                    <button
                      (click)="approve(r.id)"
                      [disabled]="isBusy(r.id)"
                      class="px-3 py-2 rounded-xl text-xs font-semibold border transition
                            bg-emerald-500/15 border-emerald-500/30 text-emerald-200 hover:bg-emerald-500/25
                            disabled:opacity-50 disabled:cursor-not-allowed"
                    >
                      {{ isBusy(r.id) ? 'Working…' : 'Confirm' }}
                    </button>

                    <button
                      (click)="reject(r.id)"
                      [disabled]="isBusy(r.id)"
                      class="px-3 py-2 rounded-xl text-xs font-semibold border transition
                            bg-red-500/15 border-red-500/30 text-red-200 hover:bg-red-500/25
                            disabled:opacity-50 disabled:cursor-not-allowed"
                    >
                      Reject
                    </button>
                  </div>
                </td>

                <!-- New user data (backend fields) -->
                <td class="px-4 py-3 align-top">{{ fmtText(r.name) }}</td>
                <td class="px-4 py-3 align-top">{{ fmtText(r.surname) }}</td>
                <td class="px-4 py-3 align-top">{{ fmtText(r.email) }}</td>
                <td class="px-4 py-3 align-top">{{ fmtText(r.phone) }}</td>
                <td class="px-4 py-3 align-top">{{ fmtText(r.address) }}</td>
                <!-- New image: you currently only have imageId -->
                <td class="px-4 py-3 align-top">
                  <span class="text-gray-300">Image ID:</span>
                  <span class="text-gray-100 font-semibold">{{ r.imageId ?? '—' }}</span>
                  <!-- If you have an endpoint to load by imageId, we can render <img [src]="..." /> -->
                </td>

                <!-- Vehicle fields are nested in r.vehicle -->
                <td class="px-4 py-3 align-top">{{ fmtBool(r.vehicle?.babyTransport) }}</td>
                <td class="px-4 py-3 align-top">{{ fmtText(r.vehicle?.licenseNumber) }}</td>
                <td class="px-4 py-3 align-top">{{ fmtText(r.vehicle?.model) }}</td>
                <td class="px-4 py-3 align-top">{{ fmtNum(r.vehicle?.passengerSeats) }}</td>
                <td class="px-4 py-3 align-top">{{ fmtBool(r.vehicle?.petTransport) }}</td>
                <td class="px-4 py-3 align-top">{{ fmtText(r.vehicle?.vehicleType) }}</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </div>


  </div>
</div>
