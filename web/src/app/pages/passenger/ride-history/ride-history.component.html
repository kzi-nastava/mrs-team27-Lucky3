<div class="min-h-screen bg-black text-white p-6">
  <div class="max-w-7xl mx-auto">
    
    <!-- Header Section -->
    <div class="flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4 pt-4 mb-6">
      <h2 class="text-2xl font-bold">Ride History</h2>
      
      <!-- Filters -->
      <div class="flex flex-wrap items-center gap-2">
        
        <!-- Date Filter -->
        <div class="relative flex items-center gap-2">
          <div class="relative">
            <input
              type="date"
              [(ngModel)]="dateFilter"
              (change)="updateView()"
              class="pl-10 pr-3 py-2 bg-gray-900 border border-gray-800 rounded-xl text-sm text-white focus:outline-none focus:ring-2 focus:ring-yellow-500/50"
              placeholder="mm/dd/yyyy"
            />
            <svg 
              xmlns="http://www.w3.org/2000/svg" 
              width="16" 
              height="16" 
              viewBox="0 0 24 24" 
              fill="none" 
              stroke="currentColor" 
              stroke-width="2" 
              stroke-linecap="round" 
              stroke-linejoin="round" 
              class="text-gray-400 absolute left-3 top-1/2 -translate-y-1/2 pointer-events-none"
            >
              <rect width="18" height="18" x="3" y="4" rx="2" ry="2"/>
              <line x1="16" x2="16" y1="2" y2="6"/>
              <line x1="8" x2="8" y1="2" y2="6"/>
              <line x1="3" x2="21" y1="10" y2="10"/>
            </svg>
          </div>
          
          <button
            *ngIf="dateFilter"
            (click)="dateFilter = ''; updateView()"
            class="p-2 hover:bg-gray-800 rounded-lg transition-colors"
            title="Reset date filter"
          >
            <svg 
              xmlns="http://www.w3.org/2000/svg" 
              width="16" 
              height="16" 
              viewBox="0 0 24 24" 
              fill="none" 
              stroke="currentColor" 
              stroke-width="2" 
              stroke-linecap="round" 
              stroke-linejoin="round" 
              class="text-gray-400"
            >
              <path d="M18 6 6 18"/>
              <path d="m6 6 12 12"/>
            </svg>
          </button>
        </div>
        
        <!-- Status Filter Buttons -->
        <div class="flex gap-2 bg-gray-900 p-1 rounded-lg">
          <button
            *ngFor="let status of ['all', 'completed', 'cancelled']"
            (click)="setFilter($any(status))"
            class="px-4 py-1.5 rounded-md text-sm font-medium transition-all capitalize"
            [ngClass]="{
              'bg-yellow-500 text-black': filter === status,
              'text-gray-400 hover:text-white hover:bg-gray-800': filter !== status
            }"
          >
            {{ status }}
          </button>
        </div>
      </div>
    </div>

    <!-- Table Container -->
    <div class="bg-gray-900/50 rounded-xl border border-gray-800 overflow-hidden">
      <div class="overflow-x-auto">
        <table class="w-full min-w-full">
          
          <!-- Table Header -->
          <thead class="bg-gray-900/80 border-b border-gray-800">
            <tr>
              <th 
                (click)="onSort('id')"
                class="px-6 py-4 text-left text-xs font-medium text-gray-400 uppercase tracking-wider cursor-pointer hover:text-white transition-colors select-none"
              >
                <div class="flex items-center gap-2">
                  ID
                  <svg 
                    *ngIf="sortField === 'id' && sortDirection === 'asc'" 
                    xmlns="http://www.w3.org/2000/svg" 
                    width="14" 
                    height="14" 
                    viewBox="0 0 24 24" 
                    fill="none" 
                    stroke="currentColor" 
                    stroke-width="2" 
                    stroke-linecap="round" 
                    stroke-linejoin="round" 
                    class="text-yellow-500"
                  >
                    <polyline points="18 15 12 9 6 15"/>
                  </svg>
                  <svg 
                    *ngIf="sortField === 'id' && sortDirection === 'desc'" 
                    xmlns="http://www.w3.org/2000/svg" 
                    width="14" 
                    height="14" 
                    viewBox="0 0 24 24" 
                    fill="none" 
                    stroke="currentColor" 
                    stroke-width="2" 
                    stroke-linecap="round" 
                    stroke-linejoin="round" 
                    class="text-yellow-500"
                  >
                    <polyline points="6 9 12 15 18 9"/>
                  </svg>
                </div>
              </th>
              
              <th 
                (click)="onSort('status')"
                class="px-6 py-4 text-left text-xs font-medium text-gray-400 uppercase tracking-wider cursor-pointer hover:text-white transition-colors select-none"
              >
                <div class="flex items-center gap-2">
                  Status
                  <svg 
                    *ngIf="sortField === 'status' && sortDirection === 'asc'" 
                    xmlns="http://www.w3.org/2000/svg" 
                    width="14" 
                    height="14" 
                    viewBox="0 0 24 24" 
                    fill="none" 
                    stroke="currentColor" 
                    stroke-width="2" 
                    stroke-linecap="round" 
                    stroke-linejoin="round" 
                    class="text-yellow-500"
                  >
                    <polyline points="18 15 12 9 6 15"/>
                  </svg>
                  <svg 
                    *ngIf="sortField === 'status' && sortDirection === 'desc'" 
                    xmlns="http://www.w3.org/2000/svg" 
                    width="14" 
                    height="14" 
                    viewBox="0 0 24 24" 
                    fill="none" 
                    stroke="currentColor" 
                    stroke-width="2" 
                    stroke-linecap="round" 
                    stroke-linejoin="round" 
                    class="text-yellow-500"
                  >
                    <polyline points="6 9 12 15 18 9"/>
                  </svg>
                </div>
              </th>
              
              <th class="px-6 py-4 text-left text-xs font-medium text-gray-400 uppercase tracking-wider">
                Driver
              </th>
              
              <th class="px-6 py-4 text-left text-xs font-medium text-gray-400 uppercase tracking-wider">
                Passenger(s)
              </th>
              
              <th class="px-6 py-4 text-left text-xs font-medium text-gray-400 uppercase tracking-wider">
                Departure
              </th>
              
              <th class="px-6 py-4 text-left text-xs font-medium text-gray-400 uppercase tracking-wider">
                Destination
              </th>
              
              <th 
                (click)="onSort('scheduledTime')"
                class="px-6 py-4 text-left text-xs font-medium text-gray-400 uppercase tracking-wider cursor-pointer hover:text-white transition-colors select-none"
              >
                <div class="flex items-center gap-2">
                  Scheduled Time
                  <svg 
                    *ngIf="sortField === 'scheduledTime' && sortDirection === 'asc'" 
                    xmlns="http://www.w3.org/2000/svg" 
                    width="14" 
                    height="14" 
                    viewBox="0 0 24 24" 
                    fill="none" 
                    stroke="currentColor" 
                    stroke-width="2" 
                    stroke-linecap="round" 
                    stroke-linejoin="round" 
                    class="text-yellow-500"
                  >
                    <polyline points="18 15 12 9 6 15"/>
                  </svg>
                  <svg 
                    *ngIf="sortField === 'scheduledTime' && sortDirection === 'desc'" 
                    xmlns="http://www.w3.org/2000/svg" 
                    width="14" 
                    height="14" 
                    viewBox="0 0 24 24" 
                    fill="none" 
                    stroke="currentColor" 
                    stroke-width="2" 
                    stroke-linecap="round" 
                    stroke-linejoin="round" 
                    class="text-yellow-500"
                  >
                    <polyline points="6 9 12 15 18 9"/>
                  </svg>
                </div>
              </th>
              
              <th 
                (click)="onSort('totalCost')"
                class="px-6 py-4 text-left text-xs font-medium text-gray-400 uppercase tracking-wider cursor-pointer hover:text-white transition-colors select-none"
              >
                <div class="flex items-center gap-2">
                  Cost
                  <svg 
                    *ngIf="sortField === 'totalCost' && sortDirection === 'asc'" 
                    xmlns="http://www.w3.org/2000/svg" 
                    width="14" 
                    height="14" 
                    viewBox="0 0 24 24" 
                    fill="none" 
                    stroke="currentColor" 
                    stroke-width="2" 
                    stroke-linecap="round" 
                    stroke-linejoin="round" 
                    class="text-yellow-500"
                  >
                    <polyline points="18 15 12 9 6 15"/>
                  </svg>
                  <svg 
                    *ngIf="sortField === 'totalCost' && sortDirection === 'desc'" 
                    xmlns="http://www.w3.org/2000/svg" 
                    width="14" 
                    height="14" 
                    viewBox="0 0 24 24" 
                    fill="none" 
                    stroke="currentColor" 
                    stroke-width="2" 
                    stroke-linecap="round" 
                    stroke-linejoin="round" 
                    class="text-yellow-500"
                  >
                    <polyline points="6 9 12 15 18 9"/>
                  </svg>
                </div>
              </th>
              
              <th class="px-6 py-4 text-left text-xs font-medium text-gray-400 uppercase tracking-wider">
                Actions
              </th>
            </tr>
          </thead>
          
          <!-- Table Body -->
          <tbody class="divide-y divide-gray-800">
            <tr 
              *ngFor="let ride of sortedRides" 
              class="hover:bg-gray-800/50 transition-all"
            >
              <td class="px-6 py-4 whitespace-nowrap text-sm font-medium">
                #{{ ride.id }}
              </td>
              
              <td class="px-6 py-4 whitespace-nowrap">
                <span 
                  class="px-3 py-1 rounded-full text-xs font-medium capitalize"
                  [ngClass]="getStatusClass(ride.status)"
                >
                  {{ formatStatus(ride.status) }}
                </span>
              </td>
              
              <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-300">
                {{ getDriverName(ride) }}
              </td>
              
              <td class="px-6 py-4 text-sm text-gray-300 max-w-xs truncate" [title]="getPassengerNames(ride)">
                {{ getPassengerNames(ride) }}
              </td>
              
              <td class="px-6 py-4 text-sm text-gray-300 max-w-xs truncate" [title]="getLocationString(ride.departure || ride.start || ride.startLocation)">
                {{ getLocationString(ride.departure || ride.start || ride.startLocation) }}
              </td>
              
              <td class="px-6 py-4 text-sm text-gray-300 max-w-xs truncate" [title]="getLocationString(ride.destination || ride.endLocation)">
                {{ getLocationString(ride.destination || ride.endLocation) }}
              </td>
              
              <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-300">
                {{ formatDate(ride.scheduledTime || ride.startTime) }}
              </td>
              
              <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-300">
                {{ ride.totalCost | currency:'USD':'symbol':'1.2-2' }}
              </td>
              
              <td class="px-6 py-4 whitespace-nowrap text-sm">
                <button
                  (click)="onViewDetails(ride)"
                  class="px-3 py-1.5 bg-yellow-500 hover:bg-yellow-600 text-black rounded-lg font-medium transition-all active:scale-95"
                >
                  View Details
                </button>
              </td>
            </tr>
            
            <!-- Empty State -->
            <tr *ngIf="sortedRides.length === 0">
              <td colspan="9" class="px-6 py-12 text-center text-gray-500">
                <div class="flex flex-col items-center gap-3">
                  <svg 
                    xmlns="http://www.w3.org/2000/svg" 
                    width="48" 
                    height="48" 
                    viewBox="0 0 24 24" 
                    fill="none" 
                    stroke="currentColor" 
                    stroke-width="1.5" 
                    stroke-linecap="round" 
                    stroke-linejoin="round" 
                    class="text-gray-700"
                  >
                    <circle cx="12" cy="12" r="10"/>
                    <line x1="12" x2="12" y1="8" y2="12"/>
                    <line x1="12" x2="12.01" y1="16" y2="16"/>
                  </svg>
                  <div>
                    <p class="text-lg font-medium text-gray-400">No rides found</p>
                    <p class="text-sm text-gray-600 mt-1">Try adjusting your filters</p>
                  </div>
                </div>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>
</div>
